#!/bin/sh

staged_files=$(git diff --staged --name-only)

echo "ğŸ§¹ Formatting code in staged filesâ€¦"
./gradlew ktlintFormat
for file in $staged_files; do
  if test -f "$file"; then
    git add "$file"
  fi
done

echo "ğŸ§¹ Running ktlintCheck..."
./gradlew ktlintCheck

if [ $? -ne 0 ]; then
  echo "âŒ ktlintCheck failed. Please fix the issues before committing."
  exit 1
fi

echo "âœ… Pre-commit check passed successfully."